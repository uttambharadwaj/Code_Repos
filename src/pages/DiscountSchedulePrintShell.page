<!--
* Revision History:
* 03/Oct/2019 CJackson    PSOBACKLOG-258   Original.
* 09/Dec/2019 CJackson    PSOBACKLOG-319   Modified logic to remove 1 from Discount Tier Maximum (using new formula field).
* 07/Jan/2020 CJackson    PSOBACKLOG-325   Hard-coded Rebate Tier header.
-->
<apex:page showHeader="false" sidebar="false" cache="false" contentType="text/xml" controller="DiscountSchedulePrintControllerShell">
    <block>
        <block>&nbsp;</block>
        <block>&nbsp;</block>
        <apex:repeat var="line" value="{!linesWithTiers}">
            <!-- <block>{!line.name}</block> -->
            <block>
                <table table-layout="fixed" width="100%" border-color="#000000" border-width="1px">
                    <apex:repeat var="col" value="{!line.displayColumns}">
                        <apex:outputPanel layout="none" rendered="{!col==true}">
                            <table-column column-width="{!line.dataColumnWidth}%" />
                        </apex:outputPanel>
                    </apex:repeat>

                    <table-header>
                        <table-row height="9pt" font-size="0.8em" font-weight="bold" text-align="center" color="#000000" background-color="#D7D7D7">
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[8]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block>Rebate Tier</block>
                                </table-cell>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[0]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block>Minimum Monthly Gallons</block>
                                </table-cell>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[1]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block>Maximum Monthly Gallons</block>
                                </table-cell>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[7]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block>{!$ObjectType.SBQQ__DiscountTier__c.fields.Bonus_Rebate__c.Label}</block>
                                </table-cell>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[2]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block font-weight="bold">
                                        <apex:outputText value="{!IF(line.name = "Custom Rebate", "Rebate on IN and OON(3) Gallons (Cents Per Gallon)" , IF(line.name = "Standard Rebate", "Cent-per-gallon rebate on gallons purchased at Shell locations", "Cents Per Gallon"))}" />
                                    </block>
                                </table-cell>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[3]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block>{!$ObjectType.SBQQ__DiscountTier__c.fields.Election__c.Label}</block>
                                </table-cell>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[4]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block>{!$ObjectType.SBQQ__DiscountTier__c.fields.Payment_Timing_Options__c.Label}</block>
                                </table-cell>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[5]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block>{!$ObjectType.SBQQ__DiscountTier__c.fields.Basis_Points_Rebate__c.Label}</block>
                                </table-cell>
                            </apex:outputPanel>
                            <apex:outputPanel layout="none" rendered="{!line.displayColumns[6]==true}">
                                <table-cell border="1px solid black" margin="0pt" padding="5pt">
                                    <block>{!$ObjectType.SBQQ__DiscountTier__c.fields.Payment_Timing__c.Label}</block>
                                </table-cell>
                            </apex:outputPanel>
                        </table-row>
                    </table-header>
                    <table-body>
                        <apex:repeat var="tier" value="{!line.tiers}">

                            <table-row font-size="0.8em">
                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[8]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="{0, number, ###,###,###}">
                                                <apex:param value="{!tier.tierNumber}" /></apex:outputText>
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>

                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[0]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="{0, number, ###,###,###}">
                                                <apex:param value="{!tier.lowerBound}" /></apex:outputText>
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>

                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[1]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="{0, number, ###,###,###}">
                                                <apex:param value="{!tier.upperBound}" /></apex:outputText>
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>

                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[7]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="{!tier.bonusRebate}" />
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>

                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[2]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="${0, number, ###,###,##0.0000}">
                                                <apex:param value="{!tier.centsPerGallon}" /></apex:outputText>
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>

                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[3]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="{!tier.election}" />
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>

                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[4]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="{!tier.paymentTimingOptions}" />
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>

                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[5]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="{!tier.basisPointsRebate}" />
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>

                                <apex:outputPanel layout="none" rendered="{!line.displayColumns[6]==true}">
                                    <table-cell text-align="center" padding="1pt" padding-left="1pt" padding-right="1pt" border="1px solid black">
                                        <block font-weight="normal">
                                            <apex:outputText value="{!tier.paymentTiming}" />
                                        </block>
                                    </table-cell>
                                </apex:outputPanel>
                            </table-row>
                        </apex:repeat>
                    </table-body>
                </table>
            </block>
            <block>&nbsp;</block>
        </apex:repeat>
    </block>
</apex:page>