<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <assignments>
        <name>Assign_Adjustment_Code</name>
        <label>Assign Adjustment Code</label>
        <locationX>1212</locationX>
        <locationY>602</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Fee_Code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AdjustmentCodeLookup</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Description__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AdjustmentReasonLookup</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Adjustment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Adjustment_Code_Retention</name>
        <label>Assign Adjustment Code (Retention)</label>
        <locationX>785</locationX>
        <locationY>463</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Fee_Code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Adjustment_Code_retention_Lookup</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Description__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Adjustment_Reason_Lookup_Retention</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Adjustment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Auto_Approval</name>
        <label>Assign Auto-Approval</label>
        <locationX>256</locationX>
        <locationY>623</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Approver_Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>CurrentUserId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Approval_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Approved</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Decision_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Approval_Comment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>*** Automatically approved</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Refund_Adjustment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Adjustment_Values</name>
        <label>Update Adjustment Values</label>
        <locationX>392</locationX>
        <locationY>529</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Negotiated__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Was_the_fee_negotiated</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Total_Late_Fee__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Actual_Fee_Amount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Amount_Waived__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Requested_Adjustment_Amount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Comment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Comments</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Fee_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Adjustment_Fee_Type</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_less_than_500</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Update the Refund record with the form values.</description>
        <name>Update_Refund_Values</name>
        <label>Update Refund Values</label>
        <locationX>393</locationX>
        <locationY>274</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Bank_ABA__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Bank_ABA</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Fleet_Bank_Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Fleet_Bank_Account</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Refund_Code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RefundCodeLookup</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Amount_Waived__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Fee_Amount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Comment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Refund_Note</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Description__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Refund_Code_Description_Lookup</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_less_than_500</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>ACTSET_choice</name>
        <choiceText>ACTSET - ACCOUNT SETUP FEE ADJUSTMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ACTSET</stringValue>
        </value>
    </choices>
    <choices>
        <name>Adjustment_choice</name>
        <choiceText>Adjustment</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>Adjustment</elementReference>
        </value>
    </choices>
    <choices>
        <name>ANC_choice</name>
        <choiceText>ANC - ANCILLARY FEE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ANC</stringValue>
        </value>
    </choices>
    <choices>
        <name>CRDFEE_choice</name>
        <choiceText>CRDFEE - CARD FEES</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>CRDFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>CS_Choice</name>
        <choiceText>CS - Customer Service</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>CS</stringValue>
        </value>
    </choices>
    <choices>
        <name>ESCH_choice</name>
        <choiceText>ESCH - Escheatment</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ESCH</stringValue>
        </value>
    </choices>
    <choices>
        <name>FUTCRED_choice</name>
        <choiceText>FUTCRED - FUTURE CREDIT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>FUTCRED</stringValue>
        </value>
    </choices>
    <choices>
        <name>GOOD_choice</name>
        <choiceText>GOOD - GOODWILL WO ADJUSTMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>GOOD</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMFRD_choice</name>
        <choiceText>IMFRD - REV- Min int fee wo due to fraud</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMFRD</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMGDW_choice</name>
        <choiceText>IMGDW - REV- Goodwill min int fee write off</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMGDW</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMIN_choice</name>
        <choiceText>IMIN - REV- Min interest fee adjustment</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMIN</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMMSP_choice</name>
        <choiceText>IMMSP - REV- Min int fee wo due to msap</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMMSP</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMOPR_choice</name>
        <choiceText>IMOPR - REV- Min int fee wo due to oper err</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMOPR</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMTRM_choice</name>
        <choiceText>IMTRM - REV- Min int fee wo due to term</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMTRM</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMW_choice</name>
        <choiceText>IMW - REV- Min int fee waived</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMW</stringValue>
        </value>
    </choices>
    <choices>
        <name>INGDW_choice</name>
        <choiceText>INGDW - REV- Goodwill interest write off</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INGDW</stringValue>
        </value>
    </choices>
    <choices>
        <name>INMSP_choice</name>
        <choiceText>INMSP - REV- Interest wo due to msap</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INMSP</stringValue>
        </value>
    </choices>
    <choices>
        <name>INOPR_choice</name>
        <choiceText>INOPR - REV- Interest wo due to oper error</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INOPR</stringValue>
        </value>
    </choices>
    <choices>
        <name>INTRM_choice</name>
        <choiceText>INTRM - REV- Interest wo due to termination</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INTRM</stringValue>
        </value>
    </choices>
    <choices>
        <name>INTRT_choice</name>
        <choiceText>INTRT - REV-Interest adjustment</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INTRT</stringValue>
        </value>
    </choices>
    <choices>
        <name>INW_choice</name>
        <choiceText>INW - REV- Interest waived</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INW</stringValue>
        </value>
    </choices>
    <choices>
        <name>ITFRD_choice</name>
        <choiceText>ITFRD - REV- Interest wo due to fraud</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ITFRD</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFGDW_choice</name>
        <choiceText>LFGDW - WRITE OFF - GOODWILL LATE FEE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFGDW</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFMSP_choice</name>
        <choiceText>LFMSP - WAIVED - LATE FEE DUE TO MISAPPLIED PAYMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFMSP</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFOPR_choice</name>
        <choiceText>LFOPR - WAIVED - LATE FEE DUE TO OUR OPER ERROR</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFOPR</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFTRM_choice</name>
        <choiceText>LFTRM - WRITE OFF - LATE FEE DUE TO TERMINATION</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFTRM</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFW_choice</name>
        <choiceText>LFW - WAIVED - LATE FEE BILLED TO MARKETER</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFW</stringValue>
        </value>
    </choices>
    <choices>
        <name>MISAP_choice</name>
        <choiceText>MISAP - Misapplied Payment</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>MISAP</stringValue>
        </value>
    </choices>
    <choices>
        <name>No</name>
        <choiceText>No</choiceText>
        <dataType>Boolean</dataType>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </choices>
    <choices>
        <name>ONLFEE_choice</name>
        <choiceText>ONLFEE - ONLINE FEE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ONLFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>OPER_choice</name>
        <choiceText>OPER - WRITE OFF - DUE TO OUR OPER ERROR</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>OPER</stringValue>
        </value>
    </choices>
    <choices>
        <name>OTHER_choice</name>
        <choiceText>OTHER - Other</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>OTHER</stringValue>
        </value>
    </choices>
    <choices>
        <name>OVERPY_choice</name>
        <choiceText>OVRPY - Overpay</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>OVRPY</stringValue>
        </value>
    </choices>
    <choices>
        <name>OVRNGT_choice</name>
        <choiceText>OVRNGT - OVERNIGHT FEE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>OVRNGT</stringValue>
        </value>
    </choices>
    <choices>
        <name>PMCFEE_choice</name>
        <choiceText>PMCFEE - PMC</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>PMCFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>PSFEE_choice</name>
        <choiceText>PSFEE - PAPER DELIVERY FEE ADJUSTMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>PSFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>RAFEE_choice</name>
        <choiceText>RAFEE - REACTIVATION FEE ADJUSTMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>RAFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>REFND_choice</name>
        <choiceText>REFND - Check Refund</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>REFND</stringValue>
        </value>
    </choices>
    <choices>
        <name>Refund_choice</name>
        <choiceText>Refund</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>Refund</elementReference>
        </value>
    </choices>
    <choices>
        <name>RSLPO_choice</name>
        <choiceText>RSLPO - Rec Sev and Loss Prevention Org</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>RSLPO</stringValue>
        </value>
    </choices>
    <choices>
        <name>RVDSC_choice</name>
        <choiceText>RVDSC - PREVIOUS MONTH REBATE REVERSED</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>RVDSC</stringValue>
        </value>
    </choices>
    <choices>
        <name>SAVEDESK_choice</name>
        <choiceText>SAVEDESK - Retention Group</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>SAVEDESK</stringValue>
        </value>
    </choices>
    <choices>
        <name>SMBAL_choice</name>
        <choiceText>SMBAL - WRITE OFF - SMALL BALANCE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>SMBAL</stringValue>
        </value>
    </choices>
    <choices>
        <name>SRS_choice</name>
        <choiceText>SRS - Strategic Receivables</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>SRS</stringValue>
        </value>
    </choices>
    <choices>
        <name>TERM_choice</name>
        <choiceText>TERM - Account Terminated</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>TERM</stringValue>
        </value>
    </choices>
    <choices>
        <name>TERMD_choice</name>
        <choiceText>TERMD - WRITE OFF - ACCOUNT TERMINATION</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>TERMD</stringValue>
        </value>
    </choices>
    <choices>
        <name>Yes</name>
        <choiceText>Yes</choiceText>
        <dataType>Boolean</dataType>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </choices>
    <constants>
        <name>Adjustment</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Adjustment</stringValue>
        </value>
    </constants>
    <constants>
        <name>Refund</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Refund</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Check_less_than_500</name>
        <label>Check less than $500</label>
        <locationX>248</locationX>
        <locationY>393</locationY>
        <defaultConnector>
            <targetReference>Update_Refund_Adjustment</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Needs Approval</defaultConnectorLabel>
        <rules>
            <name>Auto_Approve</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RefundAdjustment.Amount_Waived__c</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>500.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Auto_Approval</targetReference>
            </connector>
            <label>Auto-Approve</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checks to see if the user is a Retention (Save Desk) user to set the proper adjustment reason list</description>
        <name>Is_Retention_User</name>
        <label>Retention User?</label>
        <locationX>971</locationX>
        <locationY>361</locationY>
        <defaultConnector>
            <targetReference>Select_Adjustment_Code</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Retention User</defaultConnectorLabel>
        <rules>
            <name>Retention_User</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Your_Department</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>SAVEDESK_choice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Select_Adjustment_Code_Retention</targetReference>
            </connector>
            <label>Retention User</label>
        </rules>
    </decisions>
    <decisions>
        <description>Assign the record type name based on the prior check box.</description>
        <name>Record_Type_Selection</name>
        <label>Record Type Selection</label>
        <locationX>970</locationX>
        <locationY>186</locationY>
        <defaultConnector>
            <targetReference>Is_Retention_User</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Choose Adjustment</defaultConnectorLabel>
        <rules>
            <name>Choose_Refund</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Refund_or_Adjustment</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Refund_choice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Refund</targetReference>
            </connector>
            <label>Choose Refund</label>
        </rules>
    </decisions>
    <dynamicChoiceSets>
        <name>Adjustment_codes</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Fee_Code__c</picklistField>
        <picklistObject>Refund_Adjustment__c</picklistObject>
    </dynamicChoiceSets>
    <dynamicChoiceSets>
        <name>RefundCode_old</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Refund_Code__c</picklistField>
        <picklistObject>Refund_Adjustment__c</picklistObject>
    </dynamicChoiceSets>
    <formulas>
        <name>Adjustment_Code_retention_Lookup</name>
        <dataType>String</dataType>
        <expression>LEFT({!Adjustment_code_retention},find(&quot; &quot;,{!Adjustment_code_retention})-1)</expression>
    </formulas>
    <formulas>
        <name>Adjustment_Reason_Lookup_Retention</name>
        <dataType>String</dataType>
        <expression>RIGHT({!Adjustment_code_retention}, len({!Adjustment_code_retention} )-(find(&quot; &quot;,{!Adjustment_code_retention})+2))</expression>
    </formulas>
    <formulas>
        <name>AdjustmentCodeLookup</name>
        <dataType>String</dataType>
        <expression>LEFT({!Adjustment_code_non_retention},find(&quot; &quot;,{!Adjustment_code_non_retention})-1)</expression>
    </formulas>
    <formulas>
        <name>AdjustmentReasonLookup</name>
        <dataType>String</dataType>
        <expression>RIGHT({!Adjustment_code_non_retention}, len({!Adjustment_code_non_retention} )-(find(&quot; &quot;,{!Adjustment_code_non_retention})+2))</expression>
    </formulas>
    <formulas>
        <name>CodeLookup</name>
        <dataType>String</dataType>
        <expression>LEFT({!Temp_Adjustment_code},find(&quot; &quot;,{!Temp_Adjustment_code})-1)</expression>
    </formulas>
    <formulas>
        <name>CurrentUserId</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <description>Fee type is ANC for Ancillary Fee, LATE for all others.</description>
        <name>Get_Adjustment_Fee_Type</name>
        <dataType>String</dataType>
        <expression>IF( ISPICKVAL({!RefundAdjustment.Fee_Code__c}, &quot;ANC&quot;) , &quot;ANC&quot;, &quot;LATE&quot;)</expression>
    </formulas>
    <formulas>
        <name>Refund_Code_Description_Lookup</name>
        <dataType>String</dataType>
        <expression>RIGHT({!Refund_Code}, len({!Refund_Code} )-(find(&quot; &quot;,{!Refund_Code})+2))</expression>
    </formulas>
    <formulas>
        <name>RefundCodeLookup</name>
        <dataType>String</dataType>
        <expression>LEFT({!Refund_Code},find(&quot; &quot;,{!Refund_Code})-1)</expression>
    </formulas>
    <formulas>
        <name>Validate_requested_adjustment_value</name>
        <dataType>Boolean</dataType>
        <expression>{!Requested_Adjustment_Amount} &lt;= {!Actual_Fee_Amount}</expression>
    </formulas>
    <interviewLabel>Create Refund or Adjustment {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Create Refund or Adjustment</label>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <description>Create the initial Refund or Adjustment record</description>
        <name>Create_Refund_or_Adjustment_Record</name>
        <label>Create Refund or Adjustment Record</label>
        <locationX>1213</locationX>
        <locationY>184</locationY>
        <assignRecordIdToReference>RefundAdjustment.Id</assignRecordIdToReference>
        <connector>
            <targetReference>Record_Type_Selection</targetReference>
        </connector>
        <inputAssignments>
            <field>Account_Status__c</field>
            <value>
                <elementReference>ParentAccount.Status__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Address1__c</field>
            <value>
                <elementReference>ParentAccount.BillingStreet</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>CaseNumber__c</field>
            <value>
                <elementReference>Parent_Case.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>City__c</field>
            <value>
                <elementReference>ParentAccount.BillingCity</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Department__c</field>
            <value>
                <elementReference>Your_Department</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Funder__c</field>
            <value>
                <elementReference>ParentAccount.Funder__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name__c</field>
            <value>
                <elementReference>ParentAccount.Name</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>RecordType.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>State__c</field>
            <value>
                <elementReference>ParentAccount.BillingState</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Zip__c</field>
            <value>
                <elementReference>ParentAccount.BillingPostalCode</elementReference>
            </value>
        </inputAssignments>
        <object>Refund_Adjustment__c</object>
    </recordCreates>
    <recordLookups>
        <description>Get Account info based on the Account in the parent Case</description>
        <name>Get_Account_Data</name>
        <label>Get Account Data</label>
        <locationX>531</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Contact_Data</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Parent_Case.AccountId</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputReference>ParentAccount</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>BillingStreet</queriedFields>
        <queriedFields>BillingCity</queriedFields>
        <queriedFields>BillingState</queriedFields>
        <queriedFields>BillingPostalCode</queriedFields>
        <queriedFields>Wex_Account__c</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>Platform__c</queriedFields>
        <queriedFields>Account_Status_Date__c</queriedFields>
        <queriedFields>Funder__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Case_Data</name>
        <label>Get Case Data</label>
        <locationX>350</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Account_Data</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputReference>Parent_Case</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>ContactId</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Contact_Data</name>
        <label>Get Contact Data</label>
        <locationX>681</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Record_type</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Parent_Case.ContactId</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputReference>CaseContact</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Full_Name__c</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>FirstName</queriedFields>
        <queriedFields>LastName</queriedFields>
    </recordLookups>
    <recordLookups>
        <description>Get the record type from SF</description>
        <name>Get_Record_type</name>
        <label>Get Record Type</label>
        <locationX>1213</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Create_Refund_or_Adjustment_Record</targetReference>
        </connector>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Refund_or_Adjustment</elementReference>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Refund_Adjustment__c</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputReference>RecordType</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>DeveloperName</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>Update_Refund_Adjustment</name>
        <label>Update Refund / Adjustment</label>
        <locationX>36</locationX>
        <locationY>388</locationY>
        <inputReference>RefundAdjustment</inputReference>
    </recordUpdates>
    <screens>
        <name>ChooseRecordType</name>
        <label>Refund/Adjustment: Choose Record Type</label>
        <locationX>187</locationX>
        <locationY>50</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_Case_Data</targetReference>
        </connector>
        <fields>
            <name>Refund_or_Adjustment</name>
            <choiceReferences>Adjustment_choice</choiceReferences>
            <choiceReferences>Refund_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Refund or Adjustment?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Your_Department</name>
            <choiceReferences>CS_Choice</choiceReferences>
            <choiceReferences>SRS_choice</choiceReferences>
            <choiceReferences>RSLPO_choice</choiceReferences>
            <choiceReferences>SAVEDESK_choice</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>CS_Choice</defaultSelectedChoiceReference>
            <fieldText>Your Department?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Create_Adjustment</name>
        <label>Create Adjustment</label>
        <locationX>567</locationX>
        <locationY>529</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Update_Adjustment_Values</targetReference>
        </connector>
        <fields>
            <name>Create_Adjustment_Display</name>
            <fieldText>Account Number: {!ParentAccount.Wex_Account__c}
Account Name: {!ParentAccount.Name}
Account Status: {!ParentAccount.Status__c}
Status Date: {!ParentAccount.Account_Status_Date__c}
Adjustment Code: {!RefundAdjustment.Fee_Code__c} - {!RefundAdjustment.Reason_Description__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Actual_Fee_Amount</name>
            <dataType>Currency</dataType>
            <fieldText>Actual Fee Amount</fieldText>
            <fieldType>InputField</fieldType>
            <helpText>The amount the customer was actually charged.</helpText>
            <isRequired>true</isRequired>
            <scale>2</scale>
        </fields>
        <fields>
            <name>Requested_Adjustment_Amount</name>
            <dataType>Currency</dataType>
            <fieldText>Requested Adjustment Amount</fieldText>
            <fieldType>InputField</fieldType>
            <helpText>The amount to be credited.  May not exceed Actual Fee Amount.</helpText>
            <isRequired>true</isRequired>
            <scale>2</scale>
            <validationRule>
                <errorMessage>Requested Adjustment Amount may not exceed Actual Fee Amount.</errorMessage>
                <formulaExpression>{!Requested_Adjustment_Amount}&lt;={!Actual_Fee_Amount}</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>Was_the_fee_negotiated</name>
            <choiceReferences>No</choiceReferences>
            <choiceReferences>Yes</choiceReferences>
            <dataType>Boolean</dataType>
            <defaultSelectedChoiceReference>No</defaultSelectedChoiceReference>
            <fieldText>Was the fee negotiated?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Comments</name>
            <fieldText>Comments</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Create_Refund</name>
        <label>Create Refund</label>
        <locationX>678</locationX>
        <locationY>274</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Update_Refund_Values</targetReference>
        </connector>
        <fields>
            <name>AccountNumber</name>
            <fieldText>Account Number: {!ParentAccount.Wex_Account__c}     Platform: {!ParentAccount.Platform__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Status</name>
            <fieldText>Account Status: {!ParentAccount.Status__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Bank_ABA</name>
            <dataType>String</dataType>
            <fieldText>Bank ABA</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Fleet_Bank_Account</name>
            <dataType>String</dataType>
            <fieldText>Fleet Bank Account</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Fee_Amount</name>
            <dataType>Currency</dataType>
            <fieldText>Fee Amount</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>2</scale>
        </fields>
        <fields>
            <name>Refund_Code</name>
            <choiceReferences>ESCH_choice</choiceReferences>
            <choiceReferences>MISAP_choice</choiceReferences>
            <choiceReferences>OTHER_choice</choiceReferences>
            <choiceReferences>OVERPY_choice</choiceReferences>
            <choiceReferences>REFND_choice</choiceReferences>
            <choiceReferences>TERM_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Refund Code</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Refund_Note</name>
            <fieldText>Refund Note</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Account_Info_display</name>
            <fieldText>{!ParentAccount.Name}
Attn: {!CaseContact.FirstName} {!CaseContact.LastName}
{!ParentAccount.BillingStreet}
{!ParentAccount.BillingCity} {!ParentAccount.BillingState} {!ParentAccount.BillingPostalCode}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Select Adjustment with non-Retention codes</description>
        <name>Select_Adjustment_Code</name>
        <label>Select Adjustment Code</label>
        <locationX>1213</locationX>
        <locationY>356</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assign_Adjustment_Code</targetReference>
        </connector>
        <fields>
            <name>Account_Info</name>
            <fieldText>Account Number: {!ParentAccount.Wex_Account__c}
Account Name: {!ParentAccount.Name}
Account Status: {!ParentAccount.Status__c}  Status Date: {!ParentAccount.Account_Status_Date__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Adjustment_code_non_retention</name>
            <choiceReferences>ANC_choice</choiceReferences>
            <choiceReferences>LFGDW_choice</choiceReferences>
            <choiceReferences>LFTRM_choice</choiceReferences>
            <choiceReferences>OPER_choice</choiceReferences>
            <choiceReferences>SMBAL_choice</choiceReferences>
            <choiceReferences>TERMD_choice</choiceReferences>
            <choiceReferences>LFMSP_choice</choiceReferences>
            <choiceReferences>LFW_choice</choiceReferences>
            <choiceReferences>LFOPR_choice</choiceReferences>
            <choiceReferences>RVDSC_choice</choiceReferences>
            <choiceReferences>RAFEE_choice</choiceReferences>
            <choiceReferences>INGDW_choice</choiceReferences>
            <choiceReferences>ITFRD_choice</choiceReferences>
            <choiceReferences>INMSP_choice</choiceReferences>
            <choiceReferences>INOPR_choice</choiceReferences>
            <choiceReferences>INTRM_choice</choiceReferences>
            <choiceReferences>INW_choice</choiceReferences>
            <choiceReferences>INTRT_choice</choiceReferences>
            <choiceReferences>PSFEE_choice</choiceReferences>
            <choiceReferences>GOOD_choice</choiceReferences>
            <choiceReferences>IMGDW_choice</choiceReferences>
            <choiceReferences>IMW_choice</choiceReferences>
            <choiceReferences>IMFRD_choice</choiceReferences>
            <choiceReferences>IMMSP_choice</choiceReferences>
            <choiceReferences>IMOPR_choice</choiceReferences>
            <choiceReferences>IMTRM_choice</choiceReferences>
            <choiceReferences>IMIN_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Adjustment code</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Select_Adjustment_Code_Retention</name>
        <label>Select Adjustment Code</label>
        <locationX>787</locationX>
        <locationY>359</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assign_Adjustment_Code_Retention</targetReference>
        </connector>
        <fields>
            <name>Account_Nbr_Display</name>
            <fieldText>Account Number: {!ParentAccount.Wex_Account__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Account_Name_display</name>
            <fieldText>Account Name: {!ParentAccount.Name}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>FunderInfo_display</name>
            <fieldText>Account Status: {!ParentAccount.Status__c}  Status Date: {!ParentAccount.Account_Status_Date__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Adjustment_code_retention</name>
            <choiceReferences>LFGDW_choice</choiceReferences>
            <choiceReferences>LFTRM_choice</choiceReferences>
            <choiceReferences>CRDFEE_choice</choiceReferences>
            <choiceReferences>PSFEE_choice</choiceReferences>
            <choiceReferences>SMBAL_choice</choiceReferences>
            <choiceReferences>PMCFEE_choice</choiceReferences>
            <choiceReferences>RAFEE_choice</choiceReferences>
            <choiceReferences>ACTSET_choice</choiceReferences>
            <choiceReferences>IMGDW_choice</choiceReferences>
            <choiceReferences>ONLFEE_choice</choiceReferences>
            <choiceReferences>OVRNGT_choice</choiceReferences>
            <choiceReferences>FUTCRED_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Adjustment code</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <startElementReference>ChooseRecordType</startElementReference>
    <status>Draft</status>
    <variables>
        <name>Adjustment_Type_Picklist</name>
        <dataType>Picklist</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>CaseContact</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>Parent_Case</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>ParentAccount</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecordType</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RecordType</objectType>
    </variables>
    <variables>
        <name>RefundAdjustment</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Refund_Adjustment__c</objectType>
    </variables>
    <variables>
        <name>Temp_Adjustment_code</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Temp_adjustment_reason</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
