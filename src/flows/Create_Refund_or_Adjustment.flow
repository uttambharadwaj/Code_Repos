<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <actionCalls>
        <description>Gets the aggregate totals from Oracle</description>
        <name>Get_Totals_From_Oracle</name>
        <label>Get Totals From Oracle</label>
        <locationX>912</locationX>
        <locationY>50</locationY>
        <actionName>GetRefundAdjustmentTotals</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Are_there_prior_Refunds_or_Adjustments</targetReference>
        </connector>
        <inputParameters>
            <name>recordType</name>
            <value>
                <elementReference>RecordType.DeveloperName</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>wexAcctNbr</name>
            <value>
                <elementReference>ParentAccount.Wex_Account__c</elementReference>
            </value>
        </inputParameters>
        <outputParameters>
            <assignToReference>OracleSummaryData.errorMsg</assignToReference>
            <name>errorMsg</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>MostRecentRequest.amount</assignToReference>
            <name>mostRecentAmount</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>MostRecentRequest.approvalStatus</assignToReference>
            <name>mostRecentApprovalStatus</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>OracleSummaryData.mostRecentCodeDescription</assignToReference>
            <name>mostRecentCodeDescription</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>MostRecentRequest.createdDate</assignToReference>
            <name>mostRecentCreatedDate</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>MostRecentRequest.department</assignToReference>
            <name>mostRecentDepartment</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>MostRecentRequest.reasonComment</assignToReference>
            <name>mostRecentReason</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>MostRecentRequest.Name</assignToReference>
            <name>mostRecentSubmitter</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>WaiverRequestsGrantedSum</assignToReference>
            <name>totalFeesRefunded</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>WaiverRequestsSum</assignToReference>
            <name>totalFeesRequested</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>CountOfWaiverRequests</assignToReference>
            <name>totalRequests</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>OracleSummaryData.totalRequestsApproved</assignToReference>
            <name>totalRequestsApproved</name>
        </outputParameters>
        <outputParameters>
            <assignToReference>PendingHeldWaiverRequestsSum</assignToReference>
            <name>totalRequestsPending</name>
        </outputParameters>
    </actionCalls>
    <assignments>
        <name>Aggregate_Approved_Waivers</name>
        <label>Aggregate Approved Waivers</label>
        <locationX>1649</locationX>
        <locationY>524</locationY>
        <assignmentItems>
            <assignToReference>WaiverRequestsGrantedSum</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Current_Prior_refadj.Amount_Waived__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Prior_Refunds_or_Adjustments_Aggregates</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Aggregate_Pending_and_Held_Totals</name>
        <label>Aggregate Pending and Held Totals</label>
        <locationX>1478</locationX>
        <locationY>530</locationY>
        <assignmentItems>
            <assignToReference>PendingHeldWaiverRequestsSum</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Prior_Refunds_or_Adjustments_Aggregates</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Adjustment_Code</name>
        <label>Assign Adjustment Code</label>
        <locationX>722</locationX>
        <locationY>529</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Fee_Code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AdjustmentCodeLookup</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Description__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>AdjustmentReasonLookup</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Adjustment</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Create Refund/Adjustment record variable to hold the goodies</description>
        <name>Create_Record_Variable</name>
        <label>Create Record Variable</label>
        <locationX>1182</locationX>
        <locationY>225</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ParentAccount.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Account_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ParentAccount.Status__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Address1__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ParentAccount.BillingStreet</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.CaseNumber__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Parent_Case.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.City__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ParentAccount.BillingCity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Department__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Your_Department</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Funder__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Parent_Case.Funder_Business_Unit__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Name__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ParentAccount.Name</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.RecordTypeId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RecordType.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.State__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ParentAccount.BillingState</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Zip__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>ParentAccount.BillingPostalCode</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Approval_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Pending</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Record_Type_Selection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>GetTotalAggregates</name>
        <label>GetTotalAggregates</label>
        <locationX>1767</locationX>
        <locationY>599</locationY>
        <assignmentItems>
            <assignToReference>CountOfWaiverRequests</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>WaiverRequestsSum</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Current_Prior_refadj.Amount_Waived__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>WasTheRequestGranted</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Grab_Most_Recent_Record</name>
        <label>Grab Most Recent Record</label>
        <locationX>1837</locationX>
        <locationY>206</locationY>
        <assignmentItems>
            <assignToReference>Most_Recent_Request</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Current_Prior_refadj</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Most_Recent_Requesting_User</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Hold_for_500</name>
        <label>Hold for &gt; $500</label>
        <locationX>258</locationX>
        <locationY>588</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Approval_Status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Held</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Refund_or_Adjustment_Record</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Update_Adjustment_Values</name>
        <label>Update Adjustment Values</label>
        <locationX>392</locationX>
        <locationY>529</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Negotiated__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Was_the_fee_negotiated</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Total_Late_Fee__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Actual_Fee_Amount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Amount_Waived__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Requested_Adjustment_Amount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Comment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Comments</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Fee_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Adjustment_Fee_Type</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_less_than_500</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Update the Refund record with the form values.</description>
        <name>Update_Refund_Values</name>
        <label>Update Refund Values</label>
        <locationX>393</locationX>
        <locationY>274</locationY>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Bank_ABA__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Bank_ABA</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Fleet_Bank_Account__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Fleet_Bank_Account</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Refund_Code__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>RefundCodeLookup</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Amount_Waived__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Fee_Amount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Comment__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Refund_Note</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>RefundAdjustment.Reason_Description__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Refund_Code_Description_Lookup</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_less_than_500</targetReference>
        </connector>
    </assignments>
    <choices>
        <name>ACTSET_choice</name>
        <choiceText>ACTSET - ACCOUNT SETUP FEE ADJUSTMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ACTSET</stringValue>
        </value>
    </choices>
    <choices>
        <name>Adjustment_choice</name>
        <choiceText>Adjustment</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>Adjustment</elementReference>
        </value>
    </choices>
    <choices>
        <description>Continue button for Prior Refunds/Adjustments screen</description>
        <name>CONTINUE_choice</name>
        <choiceText>&lt;span style=&quot;font-size: 18px;&quot;&gt;Continue to Add&lt;/span&gt;</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Continue</stringValue>
        </value>
    </choices>
    <choices>
        <name>CRDFEE_choice</name>
        <choiceText>CRDFEE - CARD FEES</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>CRDFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>CS_Choice</name>
        <choiceText>CS - Customer Service</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>CS</stringValue>
        </value>
    </choices>
    <choices>
        <name>ESCH_choice</name>
        <choiceText>ESCH - Escheatment</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ESCH</stringValue>
        </value>
    </choices>
    <choices>
        <name>EXIT_choice</name>
        <choiceText>&lt;span style=&quot;font-size: 18px;&quot;&gt;Exit without Adding&lt;/span&gt;</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>Exit</stringValue>
        </value>
    </choices>
    <choices>
        <name>FUTCRED_choice</name>
        <choiceText>FUTCRED - FUTURE CREDIT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>FUTCRED</stringValue>
        </value>
    </choices>
    <choices>
        <name>GOOD_choice</name>
        <choiceText>GOOD - GOODWILL WO ADJUSTMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>GOOD</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMFRD_choice</name>
        <choiceText>IMFRD - REV- Min int fee wo due to fraud</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMFRD</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMGDW_choice</name>
        <choiceText>IMGDW - REV- Goodwill min int fee write off</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMGDW</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMIN_choice</name>
        <choiceText>IMIN - REV- Min interest fee adjustment</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMIN</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMMSP_choice</name>
        <choiceText>IMMSP - REV- Min int fee wo due to msap</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMMSP</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMOPR_choice</name>
        <choiceText>IMOPR - REV- Min int fee wo due to oper err</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMOPR</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMTRM_choice</name>
        <choiceText>IMTRM - REV- Min int fee wo due to term</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMTRM</stringValue>
        </value>
    </choices>
    <choices>
        <name>IMW_choice</name>
        <choiceText>IMW - REV- Min int fee waived</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>IMW</stringValue>
        </value>
    </choices>
    <choices>
        <name>INGDW_choice</name>
        <choiceText>INGDW - REV- Goodwill interest write off</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INGDW</stringValue>
        </value>
    </choices>
    <choices>
        <name>INMSP_choice</name>
        <choiceText>INMSP - REV- Interest wo due to msap</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INMSP</stringValue>
        </value>
    </choices>
    <choices>
        <name>INOPR_choice</name>
        <choiceText>INOPR - REV- Interest wo due to oper error</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INOPR</stringValue>
        </value>
    </choices>
    <choices>
        <name>INTRM_choice</name>
        <choiceText>INTRM - REV- Interest wo due to termination</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INTRM</stringValue>
        </value>
    </choices>
    <choices>
        <name>INTRT_choice</name>
        <choiceText>INTRT - REV-Interest adjustment</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INTRT</stringValue>
        </value>
    </choices>
    <choices>
        <name>INW_choice</name>
        <choiceText>INW - REV- Interest waived</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>INW</stringValue>
        </value>
    </choices>
    <choices>
        <name>ITFRD_choice</name>
        <choiceText>ITFRD - REV- Interest wo due to fraud</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ITFRD</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFGDW_choice</name>
        <choiceText>LFGDW - WRITE OFF - GOODWILL LATE FEE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFGDW</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFMSP_choice</name>
        <choiceText>LFMSP - WAIVED - LATE FEE DUE TO MISAPPLIED PAYMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFMSP</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFOPR_choice</name>
        <choiceText>LFOPR - WAIVED - LATE FEE DUE TO OUR OPER ERROR</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFOPR</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFTRM_choice</name>
        <choiceText>LFTRM - WRITE OFF - LATE FEE DUE TO TERMINATION</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFTRM</stringValue>
        </value>
    </choices>
    <choices>
        <name>LFW_choice</name>
        <choiceText>LFW - WAIVED - LATE FEE BILLED TO MARKETER</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>LFW</stringValue>
        </value>
    </choices>
    <choices>
        <name>MISAP_choice</name>
        <choiceText>MISAP - Misapplied Payment</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>MISAP</stringValue>
        </value>
    </choices>
    <choices>
        <name>No</name>
        <choiceText>No</choiceText>
        <dataType>Boolean</dataType>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </choices>
    <choices>
        <name>ONLFEE_choice</name>
        <choiceText>ONLFEE - ONLINE FEE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>ONLFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>OPER_choice</name>
        <choiceText>OPER - WRITE OFF - DUE TO OUR OPER ERROR</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>OPER</stringValue>
        </value>
    </choices>
    <choices>
        <name>OTHER_choice</name>
        <choiceText>OTHER - Other</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>OTHER</stringValue>
        </value>
    </choices>
    <choices>
        <name>OVERPY_choice</name>
        <choiceText>OVRPY - Overpay</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>OVRPY</stringValue>
        </value>
    </choices>
    <choices>
        <name>OVRNGT_choice</name>
        <choiceText>OVRNGT - OVERNIGHT FEE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>OVRNGT</stringValue>
        </value>
    </choices>
    <choices>
        <name>PMCFEE_choice</name>
        <choiceText>PMCFEE - PMC</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>PMCFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>PSFEE_choice</name>
        <choiceText>PSFEE - PAPER DELIVERY FEE ADJUSTMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>PSFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>RAFEE_choice</name>
        <choiceText>RAFEE - REACTIVATION FEE ADJUSTMENT</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>RAFEE</stringValue>
        </value>
    </choices>
    <choices>
        <name>REFND_choice</name>
        <choiceText>REFND - Check Refund</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>REFND</stringValue>
        </value>
    </choices>
    <choices>
        <name>Refund_choice</name>
        <choiceText>Refund</choiceText>
        <dataType>String</dataType>
        <value>
            <elementReference>Refund</elementReference>
        </value>
    </choices>
    <choices>
        <name>RSLPO_choice</name>
        <choiceText>RSLPO - Rec Sev and Loss Prevention Org</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>RSLPO</stringValue>
        </value>
    </choices>
    <choices>
        <name>RVDSC_choice</name>
        <choiceText>RVDSC - PREVIOUS MONTH REBATE REVERSED</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>RVDSC</stringValue>
        </value>
    </choices>
    <choices>
        <name>SAVEDESK_choice</name>
        <choiceText>SAVEDESK - Retention Group</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>SAVEDESK</stringValue>
        </value>
    </choices>
    <choices>
        <name>SEE_ALL_PRIOR_choice</name>
        <choiceText>&lt;span style=&quot;font-size: 18px;&quot;&gt;See Prior Requests &lt;/span&gt;&lt;i style=&quot;font-size: 18px;&quot;&gt;(Salesforce Data Only)&lt;/i&gt;</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>See_Priors</stringValue>
        </value>
    </choices>
    <choices>
        <name>SMBAL_choice</name>
        <choiceText>SMBAL - WRITE OFF - SMALL BALANCE</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>SMBAL</stringValue>
        </value>
    </choices>
    <choices>
        <name>SRS_choice</name>
        <choiceText>SRS - Strategic Receivables</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>SRS</stringValue>
        </value>
    </choices>
    <choices>
        <name>TERM_choice</name>
        <choiceText>TERM - Account Terminated</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>TERM</stringValue>
        </value>
    </choices>
    <choices>
        <name>TERMD_choice</name>
        <choiceText>TERMD - WRITE OFF - ACCOUNT TERMINATION</choiceText>
        <dataType>String</dataType>
        <value>
            <stringValue>TERMD</stringValue>
        </value>
    </choices>
    <choices>
        <name>Yes</name>
        <choiceText>Yes</choiceText>
        <dataType>Boolean</dataType>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </choices>
    <constants>
        <name>Adjustment</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Adjustment</stringValue>
        </value>
    </constants>
    <constants>
        <name>Refund</name>
        <dataType>String</dataType>
        <value>
            <stringValue>Refund</stringValue>
        </value>
    </constants>
    <decisions>
        <name>Are_there_prior_Refunds_or_Adjustments</name>
        <label>Are there prior Refunds or Adjustments?</label>
        <locationX>1056</locationX>
        <locationY>52</locationY>
        <defaultConnector>
            <targetReference>Are_there_records_in_Salesforce</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Prior Records Found</defaultConnectorLabel>
        <rules>
            <name>No_Items_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Prior_Refunds_or_Adjustments</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <elementReference>Yes</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>CountOfWaiverRequests</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Record_Variable</targetReference>
            </connector>
            <label>No Items Found</label>
        </rules>
    </decisions>
    <decisions>
        <description>Don&apos;t perform the aggregate loop if there weren&apos;t Salesforce records to consider.</description>
        <name>Are_there_records_in_Salesforce</name>
        <label>Are there records in Salesforce?</label>
        <locationX>1295</locationX>
        <locationY>14</locationY>
        <defaultConnector>
            <targetReference>Get_Prior_Refunds_or_Adjustments_Aggregates</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Salesforce records; perform aggregation</defaultConnectorLabel>
        <rules>
            <name>No_Salesforce_Records</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Prior_Refunds_or_Adjustments</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <elementReference>Yes</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Prior_Requests_Screen</targetReference>
            </connector>
            <label>No Salesforce Records</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_less_than_500</name>
        <label>Check less than $500</label>
        <locationX>248</locationX>
        <locationY>393</locationY>
        <defaultConnector>
            <targetReference>Hold_for_500</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Needs Approval</defaultConnectorLabel>
        <rules>
            <name>Auto_Approve</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>RefundAdjustment.Amount_Waived__c</leftValueReference>
                <operator>LessThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>500.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Refund_or_Adjustment_Record</targetReference>
            </connector>
            <label>Pending Submission</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_this_the_first_trip_through</name>
        <label>Is this the first trip through?</label>
        <locationX>1752</locationX>
        <locationY>16</locationY>
        <defaultConnector>
            <targetReference>GetTotalAggregates</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not First Record</defaultConnectorLabel>
        <rules>
            <name>First_Trip</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Most_Recent_Request</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <elementReference>Yes</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Grab_Most_Recent_Record</targetReference>
            </connector>
            <label>Save First Record</label>
        </rules>
    </decisions>
    <decisions>
        <name>Post_List_Screen_Decision</name>
        <label>Post-List Screen Decision</label>
        <locationX>1179</locationX>
        <locationY>730</locationY>
        <defaultConnector>
            <targetReference>Request_Abandoned</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Exit without Saving</defaultConnectorLabel>
        <rules>
            <name>Continue_to_Add_2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>What_would_you_like_to_do_list_screen</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>CONTINUE_choice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Record_Variable</targetReference>
            </connector>
            <label>Continue to Add</label>
        </rules>
    </decisions>
    <decisions>
        <name>Prior_Records_Decision</name>
        <label>Prior Records Decision</label>
        <locationX>1394</locationX>
        <locationY>365</locationY>
        <defaultConnector>
            <targetReference>Request_Abandoned</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Exit without Adding</defaultConnectorLabel>
        <rules>
            <name>Show_Popup</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>What_would_you_like_to_do</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>SEE_ALL_PRIOR_choice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Prior_Refunds_and_Adjustments_screen</targetReference>
            </connector>
            <label>Show Popup</label>
        </rules>
        <rules>
            <name>Continue_to_Add</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>What_would_you_like_to_do</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>CONTINUE_choice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Record_Variable</targetReference>
            </connector>
            <label>Continue to Add</label>
        </rules>
    </decisions>
    <decisions>
        <description>Assign the record type name based on the prior check box.</description>
        <name>Record_Type_Selection</name>
        <label>Record Type Selection</label>
        <locationX>872</locationX>
        <locationY>227</locationY>
        <defaultConnector>
            <targetReference>Select_Adjustment_Code</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Choose Adjustment</defaultConnectorLabel>
        <rules>
            <name>Choose_Refund</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Refund_or_Adjustment</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Refund_choice</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Refund</targetReference>
            </connector>
            <label>Choose Refund</label>
        </rules>
    </decisions>
    <decisions>
        <name>WasTheRequestGranted</name>
        <label>What is the request status?</label>
        <locationX>1591</locationX>
        <locationY>702</locationY>
        <defaultConnector>
            <targetReference>Get_Prior_Refunds_or_Adjustments_Aggregates</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Request_Was_Granted</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Current_Prior_refadj.Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Approved</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Aggregate_Approved_Waivers</targetReference>
            </connector>
            <label>Request Was Granted</label>
        </rules>
        <rules>
            <name>Request_is_Pending_or_Held</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Current_Prior_refadj.Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Pending</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Current_Prior_refadj.Approval_Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Held</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Aggregate_Pending_and_Held_Totals</targetReference>
            </connector>
            <label>Request is Pending or Held</label>
        </rules>
    </decisions>
    <description>Database interaction works!</description>
    <dynamicChoiceSets>
        <name>Adjustment_codes</name>
        <dataType>Picklist</dataType>
        <displayField xsi:nil="true"/>
        <object xsi:nil="true"/>
        <picklistField>Fee_Code__c</picklistField>
        <picklistObject>Refund_Adjustment__c</picklistObject>
    </dynamicChoiceSets>
    <formulas>
        <name>AdjustmentCodeLookup</name>
        <dataType>String</dataType>
        <expression>LEFT({!Adjustment_code_non_retention},find(&quot; &quot;,{!Adjustment_code_non_retention})-1)</expression>
    </formulas>
    <formulas>
        <name>AdjustmentReasonLookup</name>
        <dataType>String</dataType>
        <expression>RIGHT({!Adjustment_code_non_retention}, len({!Adjustment_code_non_retention} )-(find(&quot; &quot;,{!Adjustment_code_non_retention})+2))</expression>
    </formulas>
    <formulas>
        <description>Now minus 18 months, for querying prior refunds and adjustments</description>
        <name>Eighteen_Months_Ago</name>
        <dataType>Date</dataType>
        <expression>ADDMONTHS({!$Flow.CurrentDateTime},-18)</expression>
    </formulas>
    <formulas>
        <description>Fee type is ANC for Ancillary Fee, LATE for all others.</description>
        <name>Get_Adjustment_Fee_Type</name>
        <dataType>String</dataType>
        <expression>IF( ISPICKVAL({!RefundAdjustment.Fee_Code__c}, &quot;ANC&quot;) , &quot;ANC&quot;, &quot;LATE&quot;)</expression>
    </formulas>
    <formulas>
        <name>Recent_Prior_Record_Hyperlink</name>
        <dataType>String</dataType>
        <expression>&quot;&lt;a href=&apos;/&quot; &amp; {!Most_Recent_Request.Id} &amp; &quot;&apos; target=&apos;_parent&apos;&gt;link&lt;/a&gt;&quot;</expression>
    </formulas>
    <formulas>
        <description>Returns Waived for Adjustments, Refunded for Refunds</description>
        <name>Record_Type_Action</name>
        <dataType>String</dataType>
        <expression>IF({!RecordType.DeveloperName}=&quot;Adjustment&quot;,&quot;Waived&quot;,&quot;Refunded&quot;)</expression>
    </formulas>
    <formulas>
        <name>Refund_Code_Description_Lookup</name>
        <dataType>String</dataType>
        <expression>RIGHT({!Refund_Code}, len({!Refund_Code} )-(find(&quot; &quot;,{!Refund_Code})+2))</expression>
    </formulas>
    <formulas>
        <name>RefundCodeLookup</name>
        <dataType>String</dataType>
        <expression>LEFT({!Refund_Code},find(&quot; &quot;,{!Refund_Code})-1)</expression>
    </formulas>
    <interviewLabel>Create Refund or Adjustment {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Create Refund or Adjustment</label>
    <loops>
        <description>Gets summary data the old fashioned way....</description>
        <name>Get_Prior_Refunds_or_Adjustments_Aggregates</name>
        <label>Get Prior Refunds or Adjustments Aggregates</label>
        <locationX>1590</locationX>
        <locationY>16</locationY>
        <assignNextValueToReference>Current_Prior_refadj</assignNextValueToReference>
        <collectionReference>Prior_Refunds_or_Adjustments</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Is_this_the_first_trip_through</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Prior_Requests_Screen</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordCreates>
        <description>Create the initial Refund or Adjustment record</description>
        <name>Create_Refund_or_Adjustment_Record</name>
        <label>Create Refund or Adjustment Record</label>
        <locationX>53</locationX>
        <locationY>453</locationY>
        <connector>
            <targetReference>Get_Record_Name</targetReference>
        </connector>
        <inputReference>RefundAdjustment</inputReference>
    </recordCreates>
    <recordLookups>
        <description>Get Account info based on the Account in the parent Case</description>
        <name>Get_Account_Data</name>
        <label>Get Account Data</label>
        <locationX>533</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Contact_Data</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Parent_Case.AccountId</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputReference>ParentAccount</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>BillingStreet</queriedFields>
        <queriedFields>BillingCity</queriedFields>
        <queriedFields>BillingState</queriedFields>
        <queriedFields>BillingPostalCode</queriedFields>
        <queriedFields>Wex_Account__c</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>Platform__c</queriedFields>
        <queriedFields>Account_Status_Date__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Case_Data</name>
        <label>Get Case Data</label>
        <locationX>420</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Account_Data</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <object>Case</object>
        <outputReference>Parent_Case</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>ContactId</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>Funder_Business_Unit__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Contact_Data</name>
        <label>Get Contact Data</label>
        <locationX>650</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Prior_Refunds_and_Adjustments</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Parent_Case.ContactId</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputReference>CaseContact</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Full_Name__c</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <queriedFields>FirstName</queriedFields>
        <queriedFields>LastName</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Most_Recent_Requesting_User</name>
        <label>Get Most Recent Requesting User</label>
        <locationX>1837</locationX>
        <locationY>356</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>GetTotalAggregates</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Most_Recent_Request.CreatedById</elementReference>
            </value>
        </filters>
        <object>User</object>
        <outputReference>MostRecentRequestUser</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_Prior_Refunds_and_Adjustments</name>
        <label>Get Prior Refunds and Adjustments</label>
        <locationX>775</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Totals_From_Oracle</targetReference>
        </connector>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>ParentAccount.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>CreatedDate</field>
            <operator>GreaterThanOrEqualTo</operator>
            <value>
                <elementReference>Eighteen_Months_Ago</elementReference>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>RecordType.Id</elementReference>
            </value>
        </filters>
        <object>Refund_Adjustment__c</object>
        <outputReference>Prior_Refunds_or_Adjustments</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>CaseNumber__c</queriedFields>
        <queriedFields>Amount_Waived__c</queriedFields>
        <queriedFields>Approval_Status__c</queriedFields>
        <queriedFields>Approver_Name__c</queriedFields>
        <queriedFields>Decision_Date__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>RecordTypeId</queriedFields>
        <queriedFields>Department__c</queriedFields>
        <queriedFields>CreatedById</queriedFields>
        <queriedFields>Reason_Comment__c</queriedFields>
        <sortField>Create_Date__c</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <description>Get the name of the newly-created object</description>
        <name>Get_Record_Name</name>
        <label>Get Record Info</label>
        <locationX>54</locationX>
        <locationY>576</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Confirmation</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>RefundAdjustment.Id</elementReference>
            </value>
        </filters>
        <object>Refund_Adjustment__c</object>
        <outputReference>RefundAdjustment</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Account_Number__c</queriedFields>
        <queriedFields>Account_Status__c</queriedFields>
        <queriedFields>Name__c</queriedFields>
        <queriedFields>Approval_Status__c</queriedFields>
        <queriedFields>Amount_Waived__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <description>Get the record type from SF</description>
        <name>Get_Record_type</name>
        <label>Get Record Type</label>
        <locationX>310</locationX>
        <locationY>50</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Case_Data</targetReference>
        </connector>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Refund_or_Adjustment</elementReference>
            </value>
        </filters>
        <filters>
            <field>SobjectType</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Refund_Adjustment__c</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputReference>RecordType</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>DeveloperName</queriedFields>
    </recordLookups>
    <screens>
        <name>ChooseRecordType</name>
        <label>Refund/Adjustment: Choose Record Type</label>
        <locationX>187</locationX>
        <locationY>50</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Get_Record_type</targetReference>
        </connector>
        <fields>
            <name>Refund_or_Adjustment</name>
            <choiceReferences>Adjustment_choice</choiceReferences>
            <choiceReferences>Refund_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Refund or Adjustment?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Your_Department</name>
            <choiceReferences>CS_Choice</choiceReferences>
            <choiceReferences>SRS_choice</choiceReferences>
            <choiceReferences>RSLPO_choice</choiceReferences>
            <choiceReferences>SAVEDESK_choice</choiceReferences>
            <dataType>String</dataType>
            <defaultSelectedChoiceReference>CS_Choice</defaultSelectedChoiceReference>
            <fieldText>Your Department?</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Show confirmation message</description>
        <name>Confirmation</name>
        <label>Confirmation</label>
        <locationX>53</locationX>
        <locationY>717</locationY>
        <allowBack>false</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>ConfirmationText</name>
            <fieldText>&lt;p&gt;Your {!RecordType.DeveloperName} request has been recorded as {!RefundAdjustment.Name}.&lt;/p&gt;&lt;p&gt;Account Number: {!RefundAdjustment.Account_Number__c}&lt;/p&gt;&lt;p&gt;Amount: {!RefundAdjustment.Amount_Waived__c}&lt;/p&gt;&lt;p&gt;Status: {!RefundAdjustment.Approval_Status__c}&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Create_Adjustment</name>
        <label>Create Adjustment</label>
        <locationX>570</locationX>
        <locationY>529</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Update_Adjustment_Values</targetReference>
        </connector>
        <fields>
            <name>Create_Adjustment_Display</name>
            <fieldText>Account Number: {!ParentAccount.Wex_Account__c}
Account Name: {!ParentAccount.Name}
Account Status: {!ParentAccount.Status__c}
Status Date: {!ParentAccount.Account_Status_Date__c}
Adjustment Code: {!RefundAdjustment.Fee_Code__c} - {!RefundAdjustment.Reason_Description__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Actual_Fee_Amount</name>
            <dataType>Currency</dataType>
            <fieldText>Actual Fee Amount</fieldText>
            <fieldType>InputField</fieldType>
            <helpText>The amount the customer was actually charged.</helpText>
            <isRequired>true</isRequired>
            <scale>2</scale>
        </fields>
        <fields>
            <name>Requested_Adjustment_Amount</name>
            <dataType>Currency</dataType>
            <fieldText>Requested Adjustment Amount</fieldText>
            <fieldType>InputField</fieldType>
            <helpText>The amount to be credited.  May not exceed Actual Fee Amount.</helpText>
            <isRequired>true</isRequired>
            <scale>2</scale>
            <validationRule>
                <errorMessage>Requested Adjustment Amount may not exceed Actual Fee Amount.</errorMessage>
                <formulaExpression>{!Requested_Adjustment_Amount}&lt;={!Actual_Fee_Amount}</formulaExpression>
            </validationRule>
        </fields>
        <fields>
            <name>Was_the_fee_negotiated</name>
            <choiceReferences>No</choiceReferences>
            <choiceReferences>Yes</choiceReferences>
            <dataType>Boolean</dataType>
            <defaultSelectedChoiceReference>No</defaultSelectedChoiceReference>
            <fieldText>Was the fee negotiated?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Comments</name>
            <fieldText>Comments</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Create_Refund</name>
        <label>Create Refund</label>
        <locationX>566</locationX>
        <locationY>274</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Update_Refund_Values</targetReference>
        </connector>
        <fields>
            <name>AccountNumber</name>
            <fieldText>Account Number: {!ParentAccount.Wex_Account__c}     Platform: {!ParentAccount.Platform__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Status</name>
            <fieldText>Account Status: {!ParentAccount.Status__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Bank_ABA</name>
            <dataType>String</dataType>
            <fieldText>Bank ABA</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Fleet_Bank_Account</name>
            <dataType>String</dataType>
            <fieldText>Fleet Bank Account</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Fee_Amount</name>
            <dataType>Currency</dataType>
            <fieldText>Refund Amount</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
            <scale>2</scale>
        </fields>
        <fields>
            <name>Refund_Code</name>
            <choiceReferences>ESCH_choice</choiceReferences>
            <choiceReferences>MISAP_choice</choiceReferences>
            <choiceReferences>OTHER_choice</choiceReferences>
            <choiceReferences>OVERPY_choice</choiceReferences>
            <choiceReferences>REFND_choice</choiceReferences>
            <choiceReferences>TERM_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Refund Code</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Refund_Note</name>
            <fieldText>Refund Note</fieldText>
            <fieldType>LargeTextArea</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>Account_Info_display</name>
            <fieldText>{!ParentAccount.Name}
Attn: {!CaseContact.FirstName} {!CaseContact.LastName}
{!ParentAccount.BillingStreet}
{!ParentAccount.BillingCity} {!ParentAccount.BillingState} {!ParentAccount.BillingPostalCode}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Prior_Refunds_and_Adjustments_screen</name>
        <label>Prior Refunds and Adjustments</label>
        <locationX>1395</locationX>
        <locationY>721</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Post_List_Screen_Decision</targetReference>
        </connector>
        <fields>
            <name>What_would_you_like_to_do_list_screen</name>
            <choiceReferences>CONTINUE_choice</choiceReferences>
            <choiceReferences>EXIT_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>What would you like to do?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>false</isRequired>
        </fields>
        <fields>
            <name>prior_refunds_grid</name>
            <extensionName>c:PriorRefundAdjustmentList</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>accountId</name>
                <value>
                    <elementReference>ParentAccount.Id</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>recordTypeId</name>
                <value>
                    <elementReference>RecordType.Id</elementReference>
                </value>
            </inputParameters>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Prior_Requests_Screen</name>
        <label>Prior Requests</label>
        <locationX>1404</locationX>
        <locationY>230</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <connector>
            <targetReference>Prior_Records_Decision</targetReference>
        </connector>
        <fields>
            <name>Prior_Requests_Textbox</name>
            <fieldText>&lt;p style=&quot;text-align: center;&quot;&gt;&lt;b style=&quot;font-size: 16px; color: rgb(224, 9, 9);&quot;&gt;Prior Requests: Account Number&lt;/b&gt;&lt;b style=&quot;font-size: 16px;&quot;&gt; {!ParentAccount.Wex_Account__c}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Fees requested to be {!Record_Type_Action} in the last 18 months: &lt;b&gt;{!WaiverRequestsSum}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Fees Actually &lt;span style=&quot;color: rgb(62, 62, 60); background-color: rgb(255, 255, 255);&quot;&gt;{!Record_Type_Action}&lt;/span&gt; in the last 18 months: &lt;b&gt;{!WaiverRequestsGrantedSum}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Total requests currently Pending or Held: &lt;b&gt;{!PendingHeldWaiverRequestsSum}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;There have been this many requests: &lt;b&gt;{!CountOfWaiverRequests}&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Most_recent_Request_textbox</name>
            <fieldText>&lt;p&gt;&lt;b style=&quot;font-size: 14px;&quot;&gt;Most Recent Request&lt;/b&gt;&lt;span style=&quot;font-size: 14px;&quot;&gt; ({!Recent_Prior_Record_Hyperlink}):&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Last Request was on: &lt;b&gt;{!Most_Recent_Request.CreatedDate}&lt;/b&gt; From &lt;b&gt;{!Most_Recent_Request.Department__c}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Last Submitter was: &lt;b&gt;{!MostRecentRequestUser.Name}&lt;/b&gt;&lt;/p&gt;&lt;p&gt;Last Comment: &lt;b&gt;{!Most_Recent_Request.Reason_Comment__c}&lt;/b&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>What_would_you_like_to_do</name>
            <choiceReferences>CONTINUE_choice</choiceReferences>
            <choiceReferences>SEE_ALL_PRIOR_choice</choiceReferences>
            <choiceReferences>EXIT_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>What would you like to do?</fieldText>
            <fieldType>RadioButtons</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <name>Request_Abandoned</name>
        <label>Request Abandoned</label>
        <locationX>1452</locationX>
        <locationY>918</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>false</allowPause>
        <fields>
            <name>Abandon_textbox</name>
            <fieldText>&lt;p&gt;&lt;span style=&quot;font-size: 22px;&quot;&gt;The request has been closed.  No changes were made.&lt;/span&gt;&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <screens>
        <description>Select Adjustment with non-Retention codes</description>
        <name>Select_Adjustment_Code</name>
        <label>Select Adjustment Code</label>
        <locationX>878</locationX>
        <locationY>529</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Assign_Adjustment_Code</targetReference>
        </connector>
        <fields>
            <name>Account_Info</name>
            <fieldText>Account Number: {!ParentAccount.Wex_Account__c}
Account Name: {!ParentAccount.Name}
Account Status: {!ParentAccount.Status__c}  Status Date: {!ParentAccount.Account_Status_Date__c}</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <fields>
            <name>Adjustment_code_non_retention</name>
            <choiceReferences>LFGDW_choice</choiceReferences>
            <choiceReferences>LFTRM_choice</choiceReferences>
            <choiceReferences>OPER_choice</choiceReferences>
            <choiceReferences>SMBAL_choice</choiceReferences>
            <choiceReferences>TERMD_choice</choiceReferences>
            <choiceReferences>LFMSP_choice</choiceReferences>
            <choiceReferences>LFW_choice</choiceReferences>
            <choiceReferences>LFOPR_choice</choiceReferences>
            <choiceReferences>RVDSC_choice</choiceReferences>
            <choiceReferences>RAFEE_choice</choiceReferences>
            <choiceReferences>INGDW_choice</choiceReferences>
            <choiceReferences>ITFRD_choice</choiceReferences>
            <choiceReferences>INMSP_choice</choiceReferences>
            <choiceReferences>INOPR_choice</choiceReferences>
            <choiceReferences>INTRM_choice</choiceReferences>
            <choiceReferences>INW_choice</choiceReferences>
            <choiceReferences>INTRT_choice</choiceReferences>
            <choiceReferences>PSFEE_choice</choiceReferences>
            <choiceReferences>GOOD_choice</choiceReferences>
            <choiceReferences>IMGDW_choice</choiceReferences>
            <choiceReferences>IMW_choice</choiceReferences>
            <choiceReferences>IMFRD_choice</choiceReferences>
            <choiceReferences>IMMSP_choice</choiceReferences>
            <choiceReferences>IMOPR_choice</choiceReferences>
            <choiceReferences>IMTRM_choice</choiceReferences>
            <choiceReferences>IMIN_choice</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Adjustment code</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>true</showHeader>
    </screens>
    <startElementReference>ChooseRecordType</startElementReference>
    <status>Draft</status>
    <variables>
        <name>CaseContact</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>CountOfWaiverRequests</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>Current_Prior_refadj</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Refund_Adjustment__c</objectType>
    </variables>
    <variables>
        <name>Most_Recent_Request</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Refund_Adjustment__c</objectType>
    </variables>
    <variables>
        <name>MostRecentRequest</name>
        <apexClass>RefundAdjustment</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>MostRecentRequestUser</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>User</objectType>
    </variables>
    <variables>
        <name>OracleSummaryData</name>
        <apexClass>RefundAdjustmentTotals</apexClass>
        <dataType>Apex</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>Parent_Case</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>ParentAccount</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>PendingHeldWaiverRequestsSum</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>Prior_Refunds_or_Adjustments</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Refund_Adjustment__c</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>RecordType</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>RecordType</objectType>
    </variables>
    <variables>
        <name>RefundAdjustment</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Refund_Adjustment__c</objectType>
    </variables>
    <variables>
        <name>WaiverRequestsGrantedSum</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>WaiverRequestsSum</name>
        <dataType>Currency</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>2</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
</Flow>
